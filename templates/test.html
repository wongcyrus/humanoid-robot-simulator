<!DOCTYPE html>
<html>
<head>
    <title>Robot Action Test</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>
    <h1>🤖 Robot Action Test</h1>
    <div id="status">Connecting...</div>
    
    <h2>Test Buttons</h2>
    <button onclick="testAction('robot_1', 'wave')">Robot 1 Wave</button>
    <button onclick="testAction('robot_2', 'dance')">Robot 2 Dance</button>
    <button onclick="testAction('all', 'bow')">All Robots Bow</button>
    
    <h2>Debug Log</h2>
    <div id="log" style="background: #f0f0f0; padding: 10px; height: 300px; overflow-y: scroll;"></div>

    <script>
        const socket = io();
        const statusDiv = document.getElementById('status');
        const logDiv = document.getElementById('log');
        
        function log(message) {
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${time}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }
        
        socket.on('connect', () => {
            statusDiv.textContent = '✅ Connected';
            statusDiv.style.color = 'green';
            log('✅ WebSocket connected');
        });
        
        socket.on('disconnect', () => {
            statusDiv.textContent = '❌ Disconnected';
            statusDiv.style.color = 'red';
            log('❌ WebSocket disconnected');
        });
        
        socket.on('action_result', (result) => {
            log(`📨 Action result: ${JSON.stringify(result)}`);
        });
        
        socket.on('robot_states', (states) => {
            log(`🤖 Robot states updated: ${Object.keys(states).length} robots`);
        });
        
        function testAction(robotId, action) {
            log(`🎮 Sending action: ${robotId} -> ${action}`);
            socket.emit('run_action', {
                robot_id: robotId,
                action: action
            });
        }
    </script>
</body>
</html>
